<div>
  <p style="color: green"><%= notice %></p>

  <div>
    <h1><%= @chat.name %></h1>
    <% if @chat.description.present? %>
      <p><strong>Description:</strong> <%= @chat.description %></p>
    <% end %>
  </div>

  <h2>Participants</h2>
  <% participants = @chat.users.uniq %>
  <% if participants.any? %>
    <ul>
      <% participants.each do |user| %>
        <li><%= link_to user.name, user_path(user) %></li>
      <% end %>
    </ul>
  <% else %>
    <p>No participants yet.</p>
  <% end %>

  <h2>Messages</h2>
  <% if @chat.messages.any? %>
    <div class="messages-container">
      <% @chat.messages.order(:created_at).each do |message| %>
        <div class="message">
          <div class="message-header">
            <strong><%= message.user.name %></strong>
            <span class="timestamp"><%= message.created_at.strftime("%B %d, %Y at %I:%M %p") %></span>
          </div>
          <div class="message-content">
            <%= message.content %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No messages yet.</p>
  <% end %>

  <div>
    <%= link_to "Edit this chat", edit_chat_path(@chat) %> |
    <%= link_to "Back to chats", chats_path %>

    <%= button_to "Delete this chat", @chat, method: :delete, data: { confirm: "Are you sure?" } %>
  </div>
</div>

<style>
  .messages-container {
    margin-top: 20px;
    max-height: 500px;
    overflow-y: auto;
  }
  .message {
    margin-bottom: 15px;
    padding: 10px;
    background-color: #f8f9fa;
    border-radius: 5px;
  }
  .message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
  }
  .timestamp {
    font-size: 0.8em;
    color: #6c757d;
  }
  .message-content {
    white-space: pre-wrap;
  }
</style>